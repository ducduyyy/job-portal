import { RoleProvider, useRole } from "./components/admin/RoleProvider";
import { Navigation } from "./components/admin/Navigation";
import { CandidateHome } from "./components/candidate/CandidateHome";
import { JobSearch } from "./components/candidate/JobSearch";
import { JobDetail } from "./components/candidate/JobDetail";
import { CandidateProfile } from "./components/candidate/CandidateProfile";
import { EmployerDashboard } from "./components/employer/EmployerDashboard";
import { PostJob } from "./components/employer/PostJob";
import { SidebarProvider, SidebarInset } from "./components/ui/sidebar";
import { AdminSidebar } from "./components/admin/AdminSidebar";
import { AdminDashboard } from "./components/admin/AdminDashboard";
import { UserManagement } from "./components/admin/UserManagement";
import { JobManagement } from "./components/admin/JobManagement";
import { EmployerProfile } from "./components/employer/EmployerProfle";
import { Reports } from "./components/admin/Reports";
import { useState } from "react";

function CandidateApp() {
  const [activeTab, setActiveTab] = useState('home');
  
  const renderContent = () => {
    switch (activeTab) {
      case 'home':
        return <CandidateHome />;
      case 'search':
        return <JobSearch />;
      case 'job-detail':
        return <JobDetail />;
      case 'profile':
        return <CandidateProfile />;
      default:
        return <CandidateHome />;
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50">
      <Navigation />
      {/* Enhanced quick nav for demo */}
      <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-16 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex space-x-1 py-3">
            {[
              { key: 'home', label: 'Home' },
              { key: 'search', label: 'Search Jobs' },
              { key: 'job-detail', label: 'Job Detail' },
              { key: 'profile', label: 'My Profile' }
            ].map((tab) => (
              <button
                key={tab.key}
                onClick={() => setActiveTab(tab.key)}
                className={`px-4 py-2 rounded-2xl text-sm font-medium transition-all duration-200 ${
                  activeTab === tab.key 
                    ? 'bg-primary text-white shadow-lg shadow-primary/25' 
                    : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100/80'
                }`}
              >
                {tab.label}
              </button>
            ))}
          </div>
        </div>
      </div>
      {renderContent()}
    </div>
  );
}

function EmployerApp() {
  const [activeTab, setActiveTab] = useState('dashboard');

  const renderContent = () => {
    switch (activeTab) {
      case 'dashboard':
        return <EmployerDashboard />;
      case 'post-job':
        return <PostJob />;
      case 'company-profile':
        return <EmployerProfile />;
      default:
        return <EmployerDashboard />;
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50">
      <Navigation />
      {/* Enhanced quick nav for employer */}
      <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-16 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex space-x-1 py-3">
            {[
              { key: 'dashboard', label: 'Dashboard' },
              { key: 'post-job', label: 'Post Job' },
              { key: 'company-profile', label: 'Company Profile'}
            ].map((tab) => (
              <button
                key={tab.key}
                onClick={() => setActiveTab(tab.key)}
                className={`px-4 py-2 rounded-2xl text-sm font-medium transition-all duration-200 ${
                  activeTab === tab.key 
                    ? 'bg-primary text-white shadow-lg shadow-primary/25' 
                    : 'text-gray-600 hover:text-gray-900 hover:bg-gray-100/80'
                }`}
              >
                {tab.label}
              </button>
            ))}
          </div>
        </div>
      </div>
      {renderContent()}
    </div>
  );
}

function AdminApp() {
  const [activeSection, setActiveSection] = useState("dashboard");

  const renderContent = () => {
    switch (activeSection) {
      case "dashboard":
        return <AdminDashboard />;
      case "users":
        return <UserManagement />;
      case "jobs":
        return <JobManagement />;
      case "reports":
        return <Reports />;
      default:
        return <AdminDashboard />;
    }
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50">
      <SidebarProvider>
        <div className="flex min-h-screen w-full">
          <AdminSidebar 
            activeSection={activeSection} 
            onSectionChange={setActiveSection} 
          />
          <SidebarInset className="flex-1">
            <Navigation />
            <main className="p-8 bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen">
              <div className="max-w-7xl mx-auto">
                {renderContent()}
              </div>
            </main>
          </SidebarInset>
        </div>
      </SidebarProvider>
    </div>
  );
}

function AppContent() {
  const { currentRole } = useRole();

  switch (currentRole) {
    case 'candidate':
      return <CandidateApp />;
    case 'employer':
      return <EmployerApp />;
    case 'admin':
      return <AdminApp />;
    default:
      return <CandidateApp />;
  }
}

export default function App() {
  return (
    <RoleProvider>
      <AppContent />
    </RoleProvider>
  );
}


//adminimport { BrowserRouter, Routes, Route, Link, Navigate } from "react-router-dom";
import { RoleProvider, useRole } from "./components/RoleProvider";
import { Navigation } from "./components/Navigation";
import { CandidateHome } from "./components/candidate/CandidateHome";
import { JobSearch } from "./components/candidate/JobSearch";
import { JobDetail } from "./components/candidate/JobDetail";
import { CandidateProfile } from "./components/candidate/CandidateProfile";
import { EmployerDashboard } from "./components/employer/EmployerDashboard";
import { PostJob } from "./components/employer/PostJob";
import { EmployerProfile } from "./components/employer/EmployerProfle";
import { SidebarProvider, SidebarInset } from "./components/ui/sidebar";
import { AdminSidebar } from "./components/admin/AdminSidebar";
import { AdminDashboard } from "./components/admin/AdminDashboard";
import { UserManagement } from "./components/admin/UserManagement";
import { JobManagement } from "./components/admin/JobManagement";
import { Reports } from "./components/admin/Reports";
import Footer from "./components/Footer";



// ---------------- Candidate App ----------------
function CandidateApp() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 overflow-y-auto">
      <Navigation />
      {/* Quick nav */}
      <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-16 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex space-x-1 py-3">
            <Link
              to="/candidate/home"
              className="px-4 py-2 rounded-2xl text-sm font-medium transition-all duration-200 hover:bg-gray-100"
            >
              Home
            </Link>
            <Link to="/candidate/search" className="px-4 py-2 rounded-2xl text-sm">Search Jobs</Link>
            <Link to="/candidate/job-detail" className="px-4 py-2 rounded-2xl text-sm">Job Detail</Link>
            <Link to="/candidate/profile" className="px-4 py-2 rounded-2xl text-sm">My Profile</Link>
          </div>
        </div>
      </div>

      <Routes>
        <Route path="home" element={<CandidateHome />} />
        <Route path="search" element={<JobSearch />} />
        <Route path="job-detail" element={<JobDetail />} />
        <Route path="profile" element={<CandidateProfile />} />
        <Route path="/candidate/" element={<Navigate to="home" replace />} />
      </Routes>
    </div>
  );
}

// ---------------- Employer App ----------------
function EmployerApp() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 overflow-y-auto">
      <Navigation />
      {/* Quick nav */}
      <div className="bg-white/80 backdrop-blur-sm border-b border-gray-200/50 sticky top-16 z-40">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
          <div className="flex space-x-1 py-3">
            <Link to="/employer/dashboard" className="px-4 py-2 rounded-2xl text-sm">Dashboard</Link>
            <Link to="/employer/post-job" className="px-4 py-2 rounded-2xl text-sm">Post Job</Link>
            <Link to="/employer/company-profile" className="px-4 py-2 rounded-2xl text-sm">Company Profile</Link>
          </div>
        </div>
      </div>

      <Routes>
        <Route path="dashboard" element={<EmployerDashboard />} />
        <Route path="post-job" element={<PostJob />} />
        <Route path="company-profile" element={<EmployerProfile />} />
        <Route path="/employer/" element={<Navigate to="dashboard" replace />} />
      </Routes>
    </div>
  );
}

// ---------------- Admin App ----------------
function AdminApp() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50">
      <SidebarProvider>
        <div className="flex min-h-screen w-full">
          <AdminSidebar />
          <SidebarInset className="flex-1">
            <Navigation />
            <main className="p-8 bg-gradient-to-br from-slate-50 via-white to-blue-50 min-h-screen">
              <div className="max-w-7xl mx-auto">
                <Routes>
                  <Route path="dashboard" element={<AdminDashboard />} />
                  <Route path="users" element={<UserManagement />} />
                  <Route path="jobs" element={<JobManagement />} />
                  <Route path="reports" element={<Reports />} />
                  <Route path="*" element={<Navigate to="dashboard" replace />} />
                </Routes>
              </div>
            </main>
          </SidebarInset>
        </div>
      </SidebarProvider>
    </div>
  );
}

// ---------------- Role-based App ----------------
function AdminContent() {
  const { currentRole } = useRole();


  switch (currentRole) {
    case "candidate":
      return (
        <Routes>
          <Route path="candidate/*" element={<CandidateApp />} />
          <Route path="*" element={<Navigate to="/candidate/home" replace />} />
        </Routes>
      );
    case "employer":
      return (
        <Routes>
          <Route path="employer/*" element={<EmployerApp />} />
          <Route path="*" element={<Navigate to="/employer/dashboard" replace />} />
        </Routes>
      );
    case "admin":
      return (
        <Routes>
          <Route path="admin/*" element={<AdminApp />} />
          <Route path="*" element={<Navigate to="/admin/dashboard" replace />} />
        </Routes>
      );
    default:
      return <Navigate to="/candidate/home" replace />;
  }
}

// ---------------- Main App ----------------
export default function Admin() {
  const isAdminPage = location.pathname.startsWith("/admin");
  console.log(isAdminPage)
  return (
    <RoleProvider>
        <AdminContent />
        {!isAdminPage &&(
          <Footer />
        )}
        
    </RoleProvider>
  );
}


//App

import { Routes, Route, Navigate } from "react-router-dom";
import { RoleProvider, useRole } from "./components/RoleProvider";
import CandidateApp from "./candidate";
import EmployerApp from "./Employer";
import AdminApp from "./Admin";
import AdminLogin from "./components/authenticate/login/admin/LoginComponent";
import Login from "./components/authenticate/login/users/login";
import Register from "./components/authenticate/signup/Register";

function AppContent() {
  const { currentRole } = useRole();
  console.log(currentRole);

  return (
    <Routes>
      {/* Admin routes */}
      {currentRole === "admin" && (
        <Route path="/admin/*" element={<AdminApp />} />
      )}

      {/* Candidate routes */}
      {currentRole === "candidate" || currentRole === "admin" || currentRole === "" && (
        <Route path="/*" element={<CandidateApp />} />
      )}

      {/* Employer routes */}
      {currentRole === "employer"  || currentRole === "admin" || currentRole === "" && (
        <Route path="/employer/*" element={<EmployerApp />} />
      )}

      {currentRole === "candidate" || currentRole === "admin" || currentRole === "employer" || currentRole === ""&& (
        <Route path="/admin/login" element={<AdminLogin />} />
      )}

      {currentRole === "candidate" || currentRole === "admin" || currentRole === "employer" || currentRole === ""&& (
        <Route path="/login" element={<Login />} />
      )}

      {currentRole === "candidate" || currentRole === "admin" || currentRole === "employer" || currentRole === ""&& (
        <Route path="/register" element={<Register />} />
      )}

      {/* Redirect mặc định theo role */}
      <Route
        path="*"
        element={
          currentRole === "candidate" ? (
            <Navigate to="/home" replace />
          ) : currentRole === "employer" ? (
            <Navigate to="/employer/dashboard" replace />
          ) : currentRole === "admin" ? (
            <Navigate to="/admin/dashboard" replace />
          ) : (
            <Navigate to="/home" replace />
          )
        }
      />
    </Routes>
  );
}


export default function App() {
  return (
    <RoleProvider>
      <AppContent />
    </RoleProvider>
  );
}



  const handleSaveProfile = async () => {

    const isUnchanged = JSON.stringify(profileData) === JSON.stringify(originalProfile);

    if (isUnchanged) {
      // Không thay đổi → chỉ thoát edit mode
      setEditMode(false);
      return;
    }

  try {
    const formData = new FormData();

    // ✅ Tạo object JSON chỉ chứa các field hợp lệ
    const profileCopy = { ...profileData };

    // Loại bỏ các field là File hoặc URL
    if (profileCopy.candidateIMG instanceof File || typeof profileCopy.candidateIMG === "string") {
      delete profileCopy.candidateIMG;
    }
    if (profileCopy.cvUrl instanceof File || typeof profileCopy.cvUrl === "string") {
      delete profileCopy.cvUrl;
    }

    formData.append(
      "profile",
      new Blob([JSON.stringify(profileCopy)], { type: "application/json" })
    );

    if (profileData.candidateIMG instanceof File) {
      formData.append("avatar", profileData.candidateIMG);
    }
    if (profileData.cvFiles && profileData.cvFiles.length > 0) {
      profileData.cvFiles.forEach(file => {
        if (typeof file === "string") {
          formData.append("existingCvUrls", file); // mỗi file cũ append một param
        }
      });
    }

    const res = await axios.post(`${URL_BASE}/edit/${userId}/profile`, formData, {
      headers: {
        Authorization: `Bearer ${token}`,
      },
    });

    setProfileData((prev) => ({
      ...prev,
      ...res.data,
      candidateIMG: res.data.candidateIMG || prev.candidateIMG,
      cvUrl: res.data.cvUrl || prev.cvUrl,
    }));

    setEditMode(false);
  } catch (err) {
    console.error("Error saving profile:", err);
  }
};

              {/* Skills */}
              <TabsContent value="skills" className="space-y-6">
                {skills.length > 0 ? (
                  skills.map((skill) => (
                    <Card key={skill.skillId}>
                      <CardContent className="flex justify-between text-center items-center mt-5">
                        <span>{skill.skillName}</span>
                        <Button variant="outline" size="sm" onClick={() => handleDeleteSkill(skill.skillId)}>
                          X
                        </Button>
                      </CardContent>
                    </Card>
                  ))
                ) : (
                  <p className="text-gray-500">No skills added yet.</p>
                )}

                <div className="flex space-x-2 items-center">
                  <Select value={selectedSkill} onValueChange={setSelectedSkill}>
                    <SelectTrigger className="w-[200px]">
                      <SelectValue placeholder="Select a skill" />
                    </SelectTrigger>
                    <SelectContent>
                      {allSkills.map((skill) => (
                        <SelectItem key={skill.id} value={String(skill.id)}>
                          {skill.name}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                  <Button onClick={handleAddSkill}>
                    <Plus className="size-4 mr-2" /> Add Skill
                  </Button>
                </div>
              </TabsContent> 


              import React, { useState, useEffect, use } from 'react';
import { useNavigate } from 'react-router-dom';
import axios from 'axios';
import { Button } from '../ui/button';
import { Input } from '../ui/input';
import { Card, CardContent, CardHeader, CardTitle } from '../ui/card';
import { Badge } from '../ui/badge';
import { Checkbox } from '../ui/checkbox';
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '../ui/select';
import { Slider } from '../ui/slider';
import { Search, MapPin, DollarSign, Clock, Star, Filter, Grid, List, Bookmark } from 'lucide-react';
import { ImageWithFallback } from '../figma/ImageWithFallback';

export function JobSearch() {
  const [jobs, setJobs] = useState([]);
  const [industries, setIndustries] = useState([]);
  const [loading, setLoading] = useState(true);
  const [searchQuery, setSearchQuery] = useState('');
  const [location, setLocation] = useState('');
  const [viewMode, setViewMode] = useState('grid');
  const [salaryRange, setSalaryRange] = useState([50000]);
  const [selectedIndustries, setSelectedIndustries] = useState([]);
  const [selectedTypes, setSelectedTypes] = useState([]);
  const [savedJobs, setSavedJobs] = useState([]);
  const [visibleCount, setVisibleCount] = useState(5);
  const [selectedLevel, setSelectedLevel] = useState('');
  const navigate = useNavigate();

  useEffect(() => {
    const fetchJobs = async () => {
      try {
        const res = await axios.get('http://localhost:8080/api/jobs');
        setJobs(res.data);
      } catch (err) {
        console.error("Error fetching jobs", err);
      } finally {
        setLoading(false);
      }
    };
    fetchJobs();
  }, []);

    // Fetch industries
  useEffect(() => {
    const fetchIndustries = async () => {
      try {
        const res = await axios.get('http://localhost:8080/api/industries');
        setIndustries(res.data);
      } catch (err) {
        console.error("Error fetching industries", err);
      }
    };
    fetchIndustries();
  }, []);

    const experienceLevels = ['Entry Level', 'Mid Level', 'Senior Level', 'Executive'];

  const handleSaveJob = (jobId) => {
    if (savedJobs.includes(jobId)) {
      setSavedJobs(savedJobs.filter(id => id !== jobId));
    } else {
      setSavedJobs([...savedJobs, jobId]);
    }
  };

  const filteredJobs = jobs.filter(job =>
    job.title?.toLowerCase().includes(searchQuery.toLowerCase()) &&
    job.location?.toLowerCase().includes(location.toLowerCase()) &&
    (selectedIndustries.length === 0 || selectedIndustries.includes(job.industry?.name)) &&
    (!selectedLevel || job.experienceLevel === selectedLevel)
  );


  const JobCard = ({ job }) => (
    <Card className="hover:shadow-lg transition-shadow duration-200 relative">
      {job.featured && (
        <Badge className="absolute top-4 right-4 bg-yellow-500 text-yellow-900">
          <Star className="size-3 mr-1" />
          Featured
        </Badge>
      )}
      <CardHeader className="pb-4">
        <div className="flex items-start space-x-3">
          <div className="size-12 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0">
            <ImageWithFallback 
              src={job.jobIMG || "https://via.placeholder.com/100"} 
              alt={`${job.company || 'Company'} logo`}
              className="w-full h-full object-cover"
            />
          </div>
          <div className="flex-1 min-w-0">
            <div className="flex items-start justify-between">
              <div>
                <CardTitle className="text-lg line-clamp-1">{job.title}</CardTitle>
                <p className="text-gray-600 text-sm">{job.postedByName || 'Unknown Company'}</p>
              </div>
              <Button
                variant="ghost"
                size="sm"
                onClick={() => handleSaveJob(job.id)}
                className={`${savedJobs.includes(job.id) ? 'text-blue-600' : 'text-gray-400'}`}
              >
                <Bookmark className={`size-4 ${savedJobs.includes(job.id) ? 'fill-current' : ''}`} />
              </Button>
            </div>
          </div>
        </div>
      </CardHeader>
      <CardContent className="pt-0">
        <div className="space-y-3">
          <p className="text-gray-600 text-sm line-clamp-2">{job.description}</p>
          <div className="flex flex-wrap gap-1">
            {job.skills?.slice(0, 3).map((skill, index) => (
              <Badge key={index} variant="outline" className="text-xs">
                {skill.name}
              </Badge>
            ))}
          </div>
          <div className="flex items-center text-gray-600 text-sm">
            <MapPin className="size-4 mr-2" />
            {job.location}
          </div>
          <div className="flex items-center text-gray-600 text-sm">
            <DollarSign className="size-4 mr-2" />
            {`${job.salaryMin} - ${job.salaryMax}`}
          </div>
          <div className="flex items-center justify-between">
            <Badge variant="secondary">{job.jobType}</Badge>
            <div className="flex items-center text-gray-500 text-sm">
              <Clock className="size-4 mr-1" />
              {new Date(job.createdAt).toLocaleDateString()}
            </div>
          </div>
          <div className="flex gap-2">
            <Button className="flex-1" size="sm">Apply Now</Button>
            <Button variant="outline" size="sm" onClick={() => navigate(`/job-detail/${job.id}`)}>
              View Details
            </Button>
          </div>
        </div>
      </CardContent>
    </Card>
  );
  return (
    <div className="min-h-screen bg-gray-50">
      {/* Search Header */}
      <div className="bg-white border-b">
        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
          <div className="flex flex-col lg:flex-row gap-4">
            <div className="flex-1 flex gap-4">
              <div className="relative flex-1">
                <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-gray-400" />
                <Input
                  placeholder="Job title, keywords, or company..."
                  value={searchQuery}
                  onChange={(e) => setSearchQuery(e.target.value)}
                  className="pl-10"
                />
              </div>
              <div className="relative w-64">
                <MapPin className="absolute left-3 top-1/2 transform -translate-y-1/2 size-5 text-gray-400" />
                <Input
                  placeholder="Location..."
                  value={location}
                  onChange={(e) => setLocation(e.target.value)}
                  className="pl-10"
                />
              </div>
            </div>
            <Button className="lg:w-auto">
              <Search className="mr-2 size-4" />
              Search
            </Button>
          </div>
        </div>
      </div>

      <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div className="flex gap-6">
          {/* Filters Sidebar */}
          <div className="w-80 flex-shrink-0 hidden lg:block">
            <Card className="sticky top-6">
              <CardHeader>
                <CardTitle className="flex items-center">
                  <Filter className="mr-2 size-5" />
                  Filters
                </CardTitle>
              </CardHeader>
              <CardContent className="space-y-6">
                {/* Salary Range */}
                <div>
                  <label className="font-medium mb-3 block">Salary Range</label>
                  <div className="px-2">
                    <Slider
                      value={salaryRange}
                      onValueChange={setSalaryRange}
                      max={200000}
                      min={30000}
                      step={5000}
                      className="w-full"
                    />
                    <div className="flex justify-between text-sm text-gray-600 mt-2">
                      <span>$30k</span>
                      <span className="font-medium">${(salaryRange[0] / 1000)}k+</span>
                      <span>$200k+</span>
                    </div>
                  </div>
                </div>

                {/* Industry */}
                <div>
                  <label className="font-medium mb-3 block">Industry</label>
                  <div className="space-y-3">
                    {industries.map((industry) => (
                      <div key={industry.id} className="flex items-center space-x-2">
                        <Checkbox 
                          id={industry.id.toString()}
                          checked={selectedIndustries.includes(industry.name)}
                          onCheckedChange={(checked) => {
                            if (checked) {
                              setSelectedIndustries([...selectedIndustries, industry.name]);
                            } else {
                              setSelectedIndustries(selectedIndustries.filter(i => i !== industry.name));
                            }
                          }}
                        />
                        <label htmlFor={industry.id.toString()} className="text-sm cursor-pointer">
                          {industry.name}
                        </label>
                      </div>
                    ))}
                  </div>
                </div>

                {/* Job Type */}
                {/* <div>
                  <label className="font-medium mb-3 block">Job Type</label>
                  <div className="space-y-3">
                    {jobTypes.map((type) => (
                      <div key={type} className="flex items-center space-x-2">
                        <Checkbox 
                          id={type}
                          checked={selectedTypes.includes(type)}
                          onCheckedChange={(checked) => {
                            if (checked) {
                              setSelectedTypes([...selectedTypes, type]);
                            } else {
                              setSelectedTypes(selectedTypes.filter(t => t !== type));
                            }
                          }}
                        />
                        <label htmlFor={type} className="text-sm cursor-pointer">
                          {type}
                        </label>
                      </div>
                    ))}
                  </div>
                </div> */}

                {/* Experience Level */}
                <div>
                  <label className="font-medium mb-3 block">Experience Level</label>
                  <Select value={selectedLevel} onValueChange={setSelectedLevel}>
                    <SelectTrigger>
                      <SelectValue placeholder="Select level..." />
                    </SelectTrigger>
                    <SelectContent>
                      {experienceLevels.map((level) => (
                        <SelectItem key={level} value={level}>
                          {level}
                        </SelectItem>
                      ))}
                    </SelectContent>
                  </Select>
                </div>
              </CardContent>
            </Card>
          </div>
          {/* Jobs List */}
          <div className="flex-1">
            {loading ? (
              <p>Loading jobs...</p>
            ) : (
              <>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  {filteredJobs.slice(0, visibleCount).map((job) => (
                    <JobCard key={job.id} job={job} />
                  ))}
                </div>

                {filteredJobs.length > 5 && (
                  <div className="text-center mt-12">
                    {visibleCount < filteredJobs.length ? (
                      <Button 
                        variant="outline" 
                        size="lg"
                        onClick={() => setVisibleCount(filteredJobs.length)}
                      >
                        Load More Jobs
                      </Button>
                    ) : (
                      <Button 
                        variant="outline" 
                        size="lg"
                        onClick={() => setVisibleCount(5)}
                      >
                        Show Less
                      </Button>
                    )}
                  </div>
                )}
              </>
            )}
          </div>
        </div>
      </div>
    </div>
  );
}